!function(a,b,c){function d(a){return b.getElementById(a)}function e(a){var c;/\.js$/gi.test(a)?(c=b.createElement("script"),c.type="text/javascript",c.src=a):/\.css$/gi.test(a)&&(c=b.createElement("link"),c.rel="stylesheet",c.href=a),b.getElementsByTagName("head")[0].appendChild(c)}var f=function(a,b,c){for(b in a)a[b].src&&-1!==a[b].src.indexOf("PopWin")&&(c=a[b]);return _thisScript=c||a[a.length-1],c=_thisScript.src.replace(/\\/g,"/"),c.lastIndexOf("/")<0?".":c.substring(0,c.lastIndexOf("/"))}(document.getElementsByTagName("script")),g=function(a){this.o=c.extend(!0,{},this.defaults,a),this.init()};g.prototype={defaults:{title:"提示消息",width:"400px",height:"140px",theme:"default",dragable:!1,path:f},init:function(){if(this.id=this.o.popid?this.o.popid:this.createID(),e(this.o.path+"/theme/"+this.o.theme+".css"),!d(this.id)){var a=b.getElementsByTagName("body")[0];a.appendChild(this.tpl()),this.layoutbox=c(d(this.id)).find(".pop-layout"),this.maskbox=c(d(this.id)).find(".pop-mask"),this.conbox=c(d(this.id)).find(".pop-content"),this.titlebox=c(d(this.id)).find(".pop-title"),this.buttonbox=c(d(this.id)).find(".pop-bottom"),this.closebtn=c(d(this.id)).find(".pop-close"),this.hide()}},createID:function(){return"pop-"+Math.floor(1e8*Math.random())},close:function(){this.hide()},iframe:function(a,b,e,f,g){var h=this;_height=parseInt(f.replace(/px|\%/,"")),this.conbox.html('<iframe id="iframe-'+this.id+'" name="iframe-pop" src="'+b+'" scrolling="no" frameborder="no" border="0"></iframe>'),this.showframe(parseInt(e.replace(/px|\%/,""))-2,parseInt(f.replace(/px|\%/,""))-2),c(d(this.id)).addClass("pop-"+this.o.theme).removeAttr("style"),c(d(this.id)).removeClass("pop-"+this.o.theme+"-tip-dr").removeClass("pop-"+this.o.theme+"-tip-dl").removeClass("pop-"+this.o.theme+"-tip-d"),c(d(this.id)).removeClass("pop-"+this.o.theme+"-tip-tr").removeClass("pop-"+this.o.theme+"-tip-tl").removeClass("pop-"+this.o.theme+"-tip-t"),c(d("iframe-"+this.id)).css({width:parseInt(e.replace(/px|\%/,""))-2+"px",height:_height?_height-4+"px":parseInt(f.replace(/px|\%/,""))-4+"px"}),this.o.mask=g,this.titlebox.hide(),this.buttonbox.hide(),c(d(this.id)).find(".pop-close").off("click"),c(d(this.id)).find(".pop-close").on("click",function(){h.hide()})},text:function(a,b,e,f,g,h,i,j,k,l,m){var n,o=this;c(d(this.id)).find(".pop-content").html(e),this.show(b),c(d(this.id)).find(".pop-win").css({width:l,height:m,marginLeft:-parseInt(l)/2}),n=c(d(this.id)).find(".pop-win").height(),c(d(this.id)).find(".pop-win").css({marginTop:-n/2}),this.layoutbox.css("height","auto"),i?this.titlebox.find("strong").html(a?a:this.o.title).end().show():this.titlebox.hide(),j?(this.buttonbox.show(),c(d(this.id)).find(".pop-btn-cancel").show(),c(d(this.id)).find(".pop-btn-ok").show()):this.buttonbox.hide(),k?this.closebtn.show():this.closebtn.hide();var n=this.layoutbox.height();n=i?n-this.titlebox.height():n,n=j?n-this.buttonbox.height():n,c(d(this.id)).find(".pop-btn-ok").off("click"),c(d(this.id)).find(".pop-btn-cancel").off("click"),c(d(this.id)).find(".pop-close").off("click"),c(d(this.id)).find(".pop-btn-ok").on("click",function(){"function"==typeof f&&f.call(o,o),o.hide()}),c(d(this.id)).find(".pop-btn-cancel").on("click",function(){"function"==typeof g&&g.call(o,o),o.hide()}),c(d(this.id)).find(".pop-close").on("click",function(){"function"==typeof h&&h.call(o,o),o.hide()})},alert:function(a,b){var e=this;this.conbox.html('<div style="margin-top:20px;">'+a+"</div>"),this.show(!0),this.titlebox.hide(),this.closebtn.hide(),this.buttonbox.show(),c(d(this.id)).find(".pop-btn-cancel").hide(),c(d(this.id)).find(".pop-btn-ok").show(),c(d(this.id)).find(".pop-btn-ok").off("click"),c(d(this.id)).find(".pop-btn-ok").on("click",function(){e.hide(b),b&&"function"==typeof b&&b.call(this)})},confirm:function(a,b){var e=this;this.conbox.html('<div style="margin-top:20px;">'+a+"</div>"),this.show(!0),this.titlebox.hide(),this.closebtn.hide(),this.buttonbox.show(),this.buttonbox.find("button").show(),c(d(this.id)).find(".pop-btn-ok").off("click"),c(d(this.id)).find(".pop-btn-cancel").off("click"),c(d(this.id)).find(".pop-btn-ok").on("click",function(){"function"==typeof b&&b.call(e,e),e.hide()}),c(d(this.id)).find(".pop-btn-cancel").on("click",function(){e.hide()})},tip:function(a,d,e,f,g){var h=this;if(c("#tip-"+this.id).length<=0){var i=b.getElementsByTagName("body")[0];i.appendChild(this.createTip()),this.tipbox=c("#tip-"+this.id)}this.tipbox.find(".tip-content").html(a),this.tipbox.removeClass("tip-"+this.o.theme+"-d"),this.tipbox.removeClass("tip-"+this.o.theme+"-dr"),this.tipbox.removeClass("tip-"+this.o.theme+"-dl"),this.tipbox.removeClass("tip-"+this.o.theme+"-t"),this.tipbox.removeClass("tip-"+this.o.theme+"-tr"),this.tipbox.removeClass("tip-"+this.o.theme+"-tl");var j=c(e);switch(f){case"dr":this.tipbox.addClass("tip-"+this.o.theme+"-dr"),this.tipbox.css({left:j.offset().left-(this.tipbox.width()-j.width())+"px",top:""+j.offset().top+j.height()+this.tipbox.height()+"8px"});break;case"dl":this.tipbox.addClass("tip-"+this.o.theme+"-dl"),this.tipbox.css({left:j.offset().left+"px",top:""+j.offset().top+j.height()+this.tipbox.height()+"8px"});break;case"d":this.tipbox.addClass("tip-"+this.o.theme+"-d"),this.tipbox.css({left:j.offset().left+"px",top:""+j.offset().top+j.height()+this.tipbox.height()+"8px"});break;case"tl":this.tipbox.addClass("tip-"+this.o.theme+"-tl"),this.tipbox.css({left:j.offset().left+"px",top:""+j.offset().top-(this.tipbox.height()+8)+"px"});break;case"tr":this.tipbox.addClass("tip-"+this.o.theme+"-tr"),this.tipbox.css({left:j.offset().left-(this.tipbox.width()-j.width())+"px",top:""+j.offset().top-(this.tipbox.height()+8)+"px"});break;case"t":break;default:this.tipbox.addClass("tip-"+this.o.theme+"-t"),this.tipbox.css({left:j.offset().left+"px",top:""+j.offset().top-(this.tipbox.height()+8)+"px"})}if(this.tipbox.fadeIn(400),d>0){var k=setTimeout(function(){h.tipbox.fadeOut(400),clearTimeout(k)},d);this.tipbox.t=k}},show:function(a){c(d(this.id)).length>0?c(d(this.id)).show():(b.getElementsByTagName("body")[0].appendChild(this.tpl()),c(d(this.id)).show()),a||this.o.mask?(this.maskbox.show(),this.maskbox.css("height",c("html").height())):this.maskbox.hide(),c(d(this.id)).find(".pop-win").attr("style",""),this.layoutbox.css("height","auto").css({height:c(d(this.id)).find(".pop-win").height()-2*(this.layoutbox.offset().top-c(d(this.id)).find(".pop-win").offset().top)-1+"px"})},showframe:function(a,b,e){c(d(this.id)).show(),e||this.o.mask?this.maskbox.show():this.maskbox.hide(),c(d(this.id)).css({width:a+"px",height:b+"px"}),this.layoutbox.css({width:a+"px",height:b-2*(this.layoutbox.offset().top-c(d(this.id)).offset().top)-1+"px"})},hide:function(){c(d(this.id)).hide()},showElm:function(a){c(a).show()},hideElm:function(a){c(a).hide()},remove:function(){b.getElementsByTagName("body")[0].removeChild(d(this.id)),this.o.mask&&b.getElementsByTagName("body")[0].removeChild("mask-"+d(this.id))},tpl:function(){var a=[];a.push('<div class="pop-mask"></div>'),a.push('<div class="pop-win">'),a.push('	<div class="pop-layout" style="">'),a.push('		<span class="pop-close" title="关闭"></span>'),a.push('		<div class="pop-title"><strong></strong></div>'),a.push('		<div class="pop-content" style="">'),a.push("		</div>"),a.push('		<div class="pop-bottom"><button class="pop-btn-ok">确定</button><button class="pop-btn-cancel">取消</button></div>'),a.push('		<span class="pop-tip-arrow"></span>'),a.push("	</div></div>");var d=b.createElement("div");d.id=this.id,this.o.className&&(d.className=this.o.className),c(d).addClass("pop-"+this.o.theme),d.innerHTML=a.join("");var e=b.createDocumentFragment();return e.appendChild(d),e},createTip:function(){var a="";a+="<div class='tip-layout'>",a+="	<div class='tip-content'></div>",a+="	<span class='tip-arrow'></span>",a+="</div>";var d=b.createElement("div");d.id="tip-"+this.id,c(d).addClass("tip-"+this.o.theme),c(d).html(a);var e=b.createDocumentFragment();return e.appendChild(d),e}},a.PopWin=g}(window,document,jQuery);
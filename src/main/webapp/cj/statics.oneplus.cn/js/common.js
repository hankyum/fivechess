function prefixStyle(a,b){return""===a?b:(b=b.charAt(0).toUpperCase()+b.substr(1),a+b)}function isLogin(a){var b=_GLOBAL_CONFIG.checkLoginUrl;if(a)op.getAjax(b,"",function(b){a(b.ret,b)});else{if(""!==op.cookie.get("opnickname"))return!0;if(""===op.cookie.get("opnickname"))return!1}}function showLogin(a){window.login=window.login||document.getElementById("iframe-pop-login"),window.login?window.isIframeLoaded?window.messenger.targets.login.send(encodeURIComponent(a||window.location.href)):$("#iframe-pop-login").on("load",function(){window.messenger.targets.login.send(encodeURIComponent(a||window.location.href))}):(poplogin.iframe(!0,_GLOBAL_CONFIG.loginUrl,"650px","380px",!0),window.login=window.login||document.getElementById("iframe-pop-login"),window.messenger.addTarget(window.login.contentWindow,"login"),$("#iframe-pop-login").on("load",function(){window.messenger.targets.login.send(encodeURIComponent(a||window.location.href))}),poplogin.hide()),window.poplogin.show()}function changeLoginStatus(){if("undefined"!=typeof webUrl){var a=op.cookie.get("opnickname"),b=[];a&&""!==a?(b.push('<span class="anchor">'),b.push('<i class="icon-user"></i>'),b.push('<a href="'+webUrl.member+'" class="t2">'+decodeURIComponent(a)+"</a>"),b.push("</span>"),b.push('<div class="ddl-userinfo" id="nav-login-list" style="display:none">'),b.push('<div class="ddl-layout">'),b.push('<ul class="nav-list">'),b.push('<li><a href="'+webUrl.member+'" class="item-current">个人中心</a></li>'),b.push(' <li><a href="'+webUrl.account+'" target="_blank">一加账户</a></li>'),b.push("<li><a href=\"javascript:window.location='"+webUrl.loginout+"' + encodeURIComponent(window.location);\">退出登录</a></li>"),b.push("</ul>"),b.push("</div>"),b.push("</div>")):(b.push("<span>"),b.push('<i class="icon-user"></i>'),b.push('<a href="#" id="glogin" class="t">登录</a> / '),b.push('<a href="'+webUrl.register+'" class="t" id="gregist" target="_blank">注册</a>'),b.push("</span>")),$("#nav-login .nav-login-t").html(b.join(""))}}function newVisitorPop(){for(var a=["/accessories","/yijiashouji","/items"],b=window.location.href,c=!1,d=0;3>d;d++)if(!(b.indexOf(document.domain+a[d])<0)){c=!0;break}if(c&&"1"===op.cookie.get("nologin")){window.popRegister=window.pop||new PopWin;var e='<div class="reg-lottery-guide"><img src="http://statics.oneplus.cn/promotion/fanslove/img/success-1.png"><h2>注册送大礼免费抽手机</h2><p>新用户注册，即有机会抽取到一加手机、话费充值卡、优惠券等“见面礼”，不要错过哦！</p><a class="reg-now"href="#"><span>立即注册</span></a></div>';window.popRegister.text("注册有礼",!0,e,"","",clearNoLogin,!0,!1,!0,600,299),$(".pop-default .pop-win").css({height:"300px"}),$(".pop-default .pop-win").find(".reg-now").on("click",function(){var a=document.location.host.replace("www.","account.");window.open("http://"+a+"/regist/index")})}}function clearNoLogin(){op.cookie.del("nologin",{path:"/",domain:"oneplus.cn"})}window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){return window.setTimeout(a,17)}),window.cancelRequestAnimationFrame||(window.cancelRequestAnimationFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout);var op=window.op=window.op||{};op.dummyStyle=document.createElement("div").style,op.vendor=function(){for(var a,b="t,webkitT,MozT,msT,OT,sandT".split(","),c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in op.dummyStyle)return b[c].substr(0,b[c].length-1);return!1}();var cssVendor=op.vendor?"-"+op.vendor.toLowerCase()+"-":"";op.css3=function(){for(var a,b="-webkit-transition,-moz-transition,-o-transition,-ms-transition,transition".split(","),c=0,d=b.length,e=!1;d>c;c++)a=b[c],a in op.dummyStyle&&(e=!0);return e}(),op.useAnimation=function(){for(var a,b="-webkit-animation,-moz-animation,-o-animation,-ms-animation,animation".split(","),c=0,d=b.length,e=!1;d>c;c++)a=b[c],a in op.dummyStyle&&(e=!0);return e}(),dummyStyle=null,op.stringify=function(a){if(a instanceof Object){var b="";if(a.constructor===Array){for(var c=0;c<a.length;b+=op.stringify(a[c])+",",c++);return"["+b.substr(0,b.length-1)+"]"}if(a.toString!==Object.prototype.toString)return'"'+a.toString().replace(/"/g,"\\$&")+'"';for(var d in a)b+='"'+d.replace(/"/g,"\\$&")+'":'+op.stringify(a[d])+",";return"{"+b.substr(0,b.length-1)+"}"}return"string"==typeof a?'"'+a.replace(/"/g,"\\$&")+'"':String(a)},op.BC2BC=function(a,b){var c="";a=a.replace(/。/g,"．");for(var d=0;d<a.length;d++)code=a.charCodeAt(d),c+=b?code>=65281&&65373>=code?String.fromCharCode(a.charCodeAt(d)-65248):12288==code?String.fromCharCode(a.charCodeAt(d)-12288+32):a.charAt(d):code>=33&&126>=code?String.fromCharCode(a.charCodeAt(d)+65248):32==code?String.fromCharCode(a.charCodeAt(d)-32+12288):a.charAt(d);return c},op.json2sbc=function(a){var b;if("string"==typeof a)return b=op.BC2BC(a,!0);if("object"==typeof a)for(var c in a)b[c]=op.json2sbc(c);return b},op.getAjax=function(a,b,c,e,f){$.ajax({url:a,type:f||"post",data:b,dataType:"jsonp",jsonp:"success_jsonpCallback",timeout:3e4,complete:function(a,b){"timeout"===b&&"function"==typeof e&&e(d)}}).done(function(a){"function"==typeof c&&c(a)}).fail(function(a){"function"==typeof e&&e(a)})},op.shop=op.shop||{},op.shop.getCart=function(a,b,c){function d(){j.html("购物车中还没有商品，赶紧选购吧！").show(),l.html(""),i.hide(),k.hide()}var e,f=$(b),g=f.find(".ddl-cartbox"),h=[],i=g.find(".b-btn"),j=g.find(".loading"),k=f.parent().find(".cartNum"),l=g.find(".ddl-cart");j.html("购物车加载中..."),c&&g.show(),op.getAjax(a,{format:"json"},function(a){if("1"!=a.ret)return!1;if(0===parseInt(a.data.amount))return d(),!1;if(k.html(a.data.amount).show(),i.show(),j.hide(),g.find(".qty em").html(a.data.amount),g.find(".sum em").html(a.data.totalWithoutShipfee),e=a.data.goods,e.length>0){for(var b=0;b<e.length;b++)h.push('<li class="clearfix">'),h.push('    <a href="'+e[b].url+'" class="pic"><img src="'+e[b].image+'" alt="'+e[b].name+'"></a>'),h.push('    <h4 class="title"><a href="'+e[b].url+'">'+e[b].name+"</a></h4>"),h.push('    <div class="price"><span>￥'+e[b].discountPrice+"</span>x"+e[b].cartNum+'<br><a href="javascript:;" class="del" data-value="'+e[b].goodsCode+'" data-qty="'+e[b].cartNum+'">删除</a></div>'),h.push("</li>");l.html(h.join("")),e.length>5?l.attr("style","height:300px;overflow-x:hidden;overflow-y:scroll"):l.removeAttr("style"),i.show(),g.find(".del").on("click",function(a){var b=$(this),c=$(this).attr("data-value");listCart=$('.list-cart[value="'+c+'"]'),op.shop.delCart(_GLOBAL_CONFIG.URL.cart.del,c,function(){1==$(".del").length?(b.closest("li").remove(),d()):op.shop.getCart(_GLOBAL_CONFIG.URL.cart.index,".nav-cart-t"),listCart.length&&(0===$(".ddl-cart li").length?window.location.reload():($("#goods_jjg").find("span[data-id="+c+"-1-3-]").removeClass("checked"),listCart.remove(),qty1.refreshCart(),$(".list-cart .checked").length&&qty1.calculate()))},null,!1),a.preventDefault()})}},function(){})},op.shop.delCart=function(a,b,c,d,e){var f=this;e?window.pop.confirm("确定删除吗？",function(){op.getAjax(a,{goodsinfo:b,format:"json"},function(a){return"1"!=a.ret?(window.pop.alert("删除失败"),"function"==typeof d&&d.call(f),!1):void("function"==typeof c&&c.call(f))},function(){window.pop.alert("删除失败")})}):op.getAjax(a,{goodsinfo:b,format:"json"},function(a){return"1"!=a.ret?(window.pop.alert("删除失败"),!1):void("function"==typeof c&&c.call(f))},function(){window.pop.alert("删除失败")})},op.shop.addCart=function(a,b,c){a=a||_GLOBAL_CONFIG.URL.cart.add,b=$.extend(b,{format:"json"}),op.getAjax(a,b,function(a){return"1"!=a.ret?(window.pop.alert(a.errMsg),!1):($.ajax({url:_GLOBAL_CONFIG.URL.cart.index,data:{format:"json"},type:"post",dataType:"jsonp",jsonp:"success_jsonpCallback"}).done(function(a){var b,c,d=a;return"1"!=d.ret?!1:(b=$(".nav-cart-t"),c=d.data.amount,b.parent().find("em").html(c),void(0!==parseInt(c)?b.parent().find("em").show():b.parent().find("em").hide()))}),void("function"==typeof c&&c(a)))},function(){window.pop.alert("服务器出错")})},op.shop.showErrorTip=function(a,b,c,d){var e=$("#"+b);a?(d?$(d).find(".vt_"+b).html("").hide():e.parent().find(".validate_tip").html("").hide(),e.removeClass("validate_br")):(d?0===$(d).find(".vt_"+b).length?$(d).append('<em class="validate_tip vt_'+b+'">'+c+"</em>").show():$(d).find(".vt_"+b).html(c).show():0===e.parent().find(".validate_tip").length?e.parent().append('<em class="validate_tip">'+c+"</em>").show():e.parent().find(".validate_tip").html(c).show(),e.addClass("validate_br"))},op.shop.weixin=function(a){var b={title:"一加手机 微信二维码",content:'<div class="hd-weixin-box"><img src="'+a+'" width="184" height="184" alt="一加手机微信二维码"><p>关注一加手机，获取最新技术资讯，独一无二技术支持，<br>极致客户服务，带给您与您的手机最周到呵护！</p></div>'},c=$.extend(b),d='<div class="dialogMask"></div><div class="weixin-dialog-content"><div class="weixin-dialog-hd"><h6 class="hd-title">'+c.title+'</h6><a href="javascript:;" class="hd-close-btn"></a></div><div class="weixin-dialog-bd">'+c.content+"</div></div>";$("body").append(d),$(".weixin-dialog-content").css({top:"50%",marginTop:"-185px",left:"50%",marginLeft:"-"+$(".weixin-dialog-content").outerWidth(!0)/2+"px"}),$(".hd-close-btn").on("click",function(){$(".dialogMask").remove(),$(".weixin-dialog-content").remove()})},op.cookie=op.cookie||{},op.cookie.get=function(a){for(var b=document.cookie,c=b.split(";"),d=0;d<c.length;d++){var e=c[d].split("=");if(e&&e.length>1&&e[0].trim()==a)return e[1]}return""},op.cookie.set=function(a,b,c){document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")},op.cookie.del=function(a,b){var c=new Date;c.setTime(c.getTime()-864e5),op.cookie.set(a,"",{expires:c,path:b.path,domain:b.domain})},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.len=function(){return null===this.match(/[^ -~]/g)?this.length:this.length+this.match(/[^ -~]/g).length},String.prototype.toJSON=function(){return new Function("return "+this)()},$(function(){window.pop=window.pop||new PopWin,window.poplogin=window.poplogin||new PopWin({theme:"login",popid:"pop-login"}),window.messenger=window.messenger||new Messenger("oneplus"),window.sendMessage=function(a,b){window.messenger.targets[a].send(b)},window.messenger.listen(function(a){var b=a.split("|");b.length>=2&&(poplogin.close(),window.location.href=b[1])}),$("#nav-login").on("mouseenter",function(){$(this).addClass("nav-hover"),$("#nav-login-list").show().css("width",$("#nav-login .anchor").outerWidth()-4)}),$("#nav-login").on("mouseleave",function(){$(this).removeClass("nav-hover"),$("#nav-login-list").hide()}),$("#nav-cart").on("mouseenter",".t",function(){return $("#minicart").is(":hidden")?($("#nav-cart").addClass("nav-hover"),void op.shop.getCart(_GLOBAL_CONFIG.URL.cart.index,".nav-cart-t",!0)):!1}),$("#nav-cart").on("mouseleave",".nav-cart-t",function(){$("#nav-cart").removeClass("nav-hover"),$("#minicart").hide()}),_GLOBAL_CONFIG.URL&&_GLOBAL_CONFIG.URL.cart&&$("#nav-cart").length&&op.shop.getCart(_GLOBAL_CONFIG.URL.cart.index,".nav-cart-t"),""===op.cookie.get("opnickname")&&(poplogin.iframe(!0,_GLOBAL_CONFIG.loginUrl,"650px","380px",!0),poplogin.hide(),window.login=window.login||document.getElementById("iframe-pop-login"),window.messenger.addTarget(window.login.contentWindow,"login"),$("#iframe-pop-login").on("load",function(){window.isIframeLoaded=!0})),$("#nav-login").on("click","#glogin",function(){return window.login?(poplogin.show(),window.messenger.targets.login.send(encodeURIComponent(window.location.href))):(poplogin.iframe(!0,_GLOBAL_CONFIG.loginUrl,"650px","380px",!0),poplogin.show(),window.login=window.login||document.getElementById("iframe-pop-login"),window.messenger.addTarget(window.login.contentWindow,"login"),$("#iframe-pop-login").on("load",function(){window.messenger.targets.login.send(encodeURIComponent(window.location.href))})),!1}),$(".checkbox").on("click",function(){$(this).hasClass("checked")?$(this).removeClass("checked"):$(this).addClass("checked")}),$(".goods_jjg").on("mouseover","li",function(){$(this).parent().find("dl").hide(),$(this).find("dl").show().css({left:$(this).find("label").outerWidth()+30})}),$(".goods_jjg").on("mouseout","li",function(){$(this).find("dl").hide()}),function(){function a(a,b){a.push({aty:"0",a:"0",nameAccount:4008881111,selector:c[b].id})}var b,c=$(".online-qq"),d=document.getElementsByTagName("head")[0];c.length&&($("a.online-qq").attr("onclick","return false;"),b=document.createElement("script"),b.type="text/javascript",b.src="http://wpa.b.qq.com/cgi/wpa.php",d.appendChild(b),b.onload=b.onreadystatechange=function(){if(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState){for(var d=[],e=0;e<c.length;e++)a(d,e);BizQQWPA.addCustom(d),b.onload=b.onreadystatechange=null}})}(),$(window).on("scroll resize",function(){{var a=$(window).scrollTop();$(window).height()}a>100?$("#gotop").addClass("gotop-fixed").fadeIn():$("#gotop").removeClass("gotop-fixed").fadeOut()}),$("#gotop").on("click",function(){$("body,html").animate({scrollTop:0},"500",function(){$("#gotop").removeClass("gotop-fixed")})}),$("#showWeixin").off("click").on("click",function(){return op.shop.weixin($(this).attr("href")),!1}),newVisitorPop(),$("#foo-service-chat").length&&$("#foo-service-chat").on("click",function(){window.open("http://b.qq.com/webc.htm?new=0&sid=4008881111&eid=218808P8z8p8Q8x8y8P8y&o=www.oneplus.cn&q=7&ref="+document.location,"_blank","height=400, width=644,toolbar=no,scrollbars=no,menubar=no,status=no")})});